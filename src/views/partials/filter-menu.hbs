



<div class="tabs is-toggle is-fullwidth">
  <ul>
    <li id="brand-tab" class="" data-target="search-by-brand">
      <a>
        <span class="icon is-small"><i class="fa-solid fa-car" aria-hidden="true"></i></span>
        <span>Search by Car Brand</span>
      </a>
    </li>
    <li id="county-tab" class="" data-target="search-by-county">
      <a>
        <span class="icon is-small"><i class="fa-solid fa-map-location-dot" aria-hidden="true"></i></span>
        <span>Search by County</span>
      </a>
    </li>
    <li id="cartype-tab" class="" data-target="search-by-cartype">
      <a>
        <span class="icon is-small"><i class="fa-solid fa-car-side-bolt" aria-hidden="true"></i></span>
        <span>Search by Car Body Type</span>
      </a>
    </li>
  </ul>
</div>

<!-- Content for each tab -->
<div id="search-by-brand" class="tab-content" style="display: block;">
    <form action="/envirobuddy/carbrand/" method="get">
        <div class="field has-addons has-addons-centered">
            <div class="control">
                <div class="select">
                    <select name="brandName">
                        <option value="">Select Brand</option>
                        {{#each brandNames}}
                        <option value="{{this}}">{{this}}</option>
                        {{/each}}
                     </select>
                </div>
            </div>
            <div class="control">
                <input type="submit" value="Filter Car Dealers" class="button is-primary">
            </div>
        </div>
    </form>
</div>

<div id="search-by-county" class="tab-content" style="display: none;">
    <form action="/envirobuddy/carcounty/" method="get">
        <div class="field has-addons has-addons-centered">
            <div class="control">
                <div class="select">
                    <select name="countyName">
                    <option value="">Select County</option>
                        {{#each uniqueCountyNames}}
                            <option value="{{this}}">{{this}}</option>
                        {{/each}}
                    </select>
                </div>
            </div>
            <div class="control">
                <input type="submit" value="Filter Car Dealers" class="button is-primary">
            </div>
        </div>
    </form>
</div>

<div id="search-by-cartype" class="tab-content" style="display: none;">
    <form action="/envirobuddy/carbodytype/" method="get">
        <div class="field has-addons has-addons-centered">
            <div class="control">
                <div class="select">
                    <select name="carBodyType">
                        <option value="">Select Car Body Type</option>
                        {{#each carBodyTypes}}
                            <option value="{{this}}">{{this}}</option>
                        {{/each}}
                    </select>
                </div>
            </div>
            <div class="control">
                <input type="submit" value="Filter Car Dealers" class="button is-primary">
            </div>
        </div>
    </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Find all tabs
    const highlightTabs = document.querySelectorAll('.tabs ul li');
    
    highlightTabs.forEach(tab => {
      tab.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove is-active class from all tabs
        highlightTabs.forEach(t => t.classList.remove('is-active'));
        
        // Add is-active class to clicked tab
        this.classList.add('is-active');
        
        // Hide all tab content
        const tabContents = document.querySelectorAll('.tab-content');
        tabContents.forEach(content => content.style.display = 'none');
        
        // Show current tab's content
        const target = document.getElementById(this.dataset.target);
        if (target) {
          target.style.display = 'block';
        }
      });
    });

  document.querySelector('select[name="carBodyType"]').addEventListener('change', function() {
      var form = this.closest('form');
      var selectedBodyType = this.value;
      form.action = "/envirobuddy/carbodytype/";
  });

  document.querySelector('select[name="brandName"]').addEventListener('change', function() {
      var form = this.closest('form');
      var selectedBrandName = this.value;
      form.action = "/envirobuddy/carbrand/";
  });

  document.querySelector('select[name="countyName"]').addEventListener('change', function() {
      var form = this.closest('form');
      var selectedCounty = this.value;
      form.action = "/envirobuddy/carcounty/";
  });

  const url = window.location.href;

    const tabs = document.querySelectorAll('#brand-tab, #county-tab, #cartype-tab');
    tabs.forEach(tab => tab.classList.remove('is-active'));

  if (url.includes('/envirobuddy/carbrand/')) {
      document.getElementById('brand-tab').classList.add('is-active');
  } else if (url.includes('/envirobuddy/carcounty/')) {
      document.getElementById('county-tab').classList.add('is-active');
  } else if (url.includes('/envirobuddy/carbodytype/')) {
      document.getElementById('cartype-tab').classList.add('is-active');
  }
});
</script>